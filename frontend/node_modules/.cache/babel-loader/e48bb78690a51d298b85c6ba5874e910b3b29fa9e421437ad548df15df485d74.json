{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sarthak Kurothe\\\\OneDrive\\\\Desktop\\\\cms_app\\\\frontend\\\\src\\\\page\\\\Dashboard\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Swal from \"sweetalert2\";\nimport Header from \"./Header\";\nimport List from \"./List\";\nimport Add from \"./Add\";\nimport Edit from \"./Edit\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [employees, setEmployees] = useState([]);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [isEditing, setISEditing] = useState(false);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(null);\n  useEffect(() => {\n    fetchEmployees();\n  }, []);\n  const fetchEmployees = async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/employees\");\n      if (response.ok) {\n        const data = await response.json();\n        setEmployees(data);\n      } else {\n        throw new Error(\"Failed to fetch employees\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching employees:\", error);\n    }\n  };\n  const handleEdit = async id => {\n    try {\n      const response = await fetch(`http://localhost:5000/employees/${id}`);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch employee details with ID: ${id}`);\n      }\n      const employee = await response.json();\n      setSelectedEmployee(employee);\n      setSelectedEmployeeId(id);\n      setISEditing(true);\n    } catch (error) {\n      console.error(\"Error fetching or setting employee details:\", error);\n    }\n  };\n  const handleDelete = async id => {\n    console.log(\"Delete requested for ID:\", id);\n    const employeeToDelete = employees.find(employee => employee.id === id);\n    if (!employeeToDelete) {\n      console.log(\"Employee not found for ID:\", id);\n      return;\n    }\n    Swal.fire({\n      icon: \"warning\",\n      title: \"Please confirm to delete\",\n      showCancelButton: true,\n      confirmButtonText: \"Delete\",\n      cancelButtonText: \"Cancel\"\n    }).then(async result => {\n      if (result.value) {\n        try {\n          console.log(\"Deleting employee with ID:\", id);\n          const response = await fetch(`http://localhost:5000/employees/${id}`, {\n            method: \"DELETE\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          console.log(\"Received response from DELETE request:\", response);\n          if (response.ok) {\n            console.log(\"Employee deleted successfully\");\n            setEmployees(employees.filter(employee => employee.id !== id));\n            Swal.fire({\n              icon: \"success\",\n              title: \"Deleted Successfully!\",\n              text: `${employeeToDelete.firstName} ${employeeToDelete.lastName}'s data has been deleted`,\n              showConfirmButton: false,\n              timer: 1500\n            });\n          } else {\n            console.error(\"Failed to delete employee, response status:\", response.status);\n            const errorData = await response.json();\n            console.error(\"Error details:\", errorData);\n            Swal.fire({\n              icon: \"error\",\n              title: \"Failed to Delete\",\n              text: errorData.message || \"Failed to delete employee\"\n            });\n          }\n        } catch (error) {\n          console.error(\"Error deleting employee:\", error);\n          Swal.fire({\n            icon: \"error\",\n            title: \"Error\",\n            text: \"An error occurred while deleting the employee. Please try again later.\"\n          });\n        }\n      } else {\n        console.log(\"Delete action was cancelled\");\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [!isAdding && !isEditing && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        setIsAdding: setIsAdding\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        employees: employees,\n        handleEdit: handleEdit,\n        handleDelete: handleDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), isAdding && /*#__PURE__*/_jsxDEV(Add, {\n      setEmployees: setEmployees,\n      setIsAdding: setIsAdding\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 20\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(Edit, {\n      selectedEmployee: selectedEmployee,\n      setEmployees: setEmployees,\n      setISEditing: setISEditing,\n      selectedEmployeeId: selectedEmployeeId,\n      employees: employees\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"XcT2lXm4ykr0Iso/rSsk5N2m3uM=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","Swal","Header","List","Add","Edit","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","employees","setEmployees","selectedEmployee","setSelectedEmployee","isAdding","setIsAdding","isEditing","setISEditing","selectedEmployeeId","setSelectedEmployeeId","fetchEmployees","response","fetch","ok","data","json","Error","error","console","handleEdit","id","employee","handleDelete","log","employeeToDelete","find","fire","icon","title","showCancelButton","confirmButtonText","cancelButtonText","then","result","value","method","headers","filter","text","firstName","lastName","showConfirmButton","timer","status","errorData","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Sarthak Kurothe/OneDrive/Desktop/cms_app/frontend/src/page/Dashboard/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Swal from \"sweetalert2\";\nimport Header from \"./Header\";\nimport List from \"./List\";\nimport Add from \"./Add\";\nimport Edit from \"./Edit\";\nimport { useEffect } from \"react\";\n\nfunction Dashboard() {\n  const [employees, setEmployees] = useState([]);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [isEditing, setISEditing] = useState(false);\n  const [selectedEmployeeId, setSelectedEmployeeId] = useState(null); \n\n  useEffect(() => {\n    fetchEmployees();\n  }, []);\n\n  const fetchEmployees = async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/employees\");\n      if (response.ok) {\n        const data = await response.json();\n        setEmployees(data);\n      } else {\n        throw new Error(\"Failed to fetch employees\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching employees:\", error);\n    }\n  };\n\n  const handleEdit = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:5000/employees/${id}`);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch employee details with ID: ${id}`);\n      }\n      const employee = await response.json();\n      setSelectedEmployee(employee);\n      setSelectedEmployeeId(id); \n      setISEditing(true);\n    } catch (error) {\n      console.error(\"Error fetching or setting employee details:\", error);\n    }\n  };\n\nconst handleDelete = async (id) => {\n  console.log(\"Delete requested for ID:\", id);\n  const employeeToDelete = employees.find((employee) => employee.id === id);\n  if (!employeeToDelete) {\n    console.log(\"Employee not found for ID:\", id);\n    return;\n  }\n\n  Swal.fire({\n    icon: \"warning\",\n    title: \"Please confirm to delete\",\n    showCancelButton: true,\n    confirmButtonText: \"Delete\",\n    cancelButtonText: \"Cancel\",\n  }).then(async (result) => {\n    if (result.value) {\n      try {\n        console.log(\"Deleting employee with ID:\", id);\n\n        const response = await fetch(`http://localhost:5000/employees/${id}`, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        });\n        console.log(\"Received response from DELETE request:\", response);\n\n        if (response.ok) {\n          console.log(\"Employee deleted successfully\");\n          setEmployees(employees.filter((employee) => employee.id !== id));\n          Swal.fire({\n            icon: \"success\",\n            title: \"Deleted Successfully!\",\n            text: `${employeeToDelete.firstName} ${employeeToDelete.lastName}'s data has been deleted`,\n            showConfirmButton: false,\n            timer: 1500,\n          });\n        } else {\n          console.error(\"Failed to delete employee, response status:\", response.status);\n          const errorData = await response.json();\n          console.error(\"Error details:\", errorData);\n          Swal.fire({\n            icon: \"error\",\n            title: \"Failed to Delete\",\n            text: errorData.message || \"Failed to delete employee\",\n          });\n        }\n      } catch (error) {\n        console.error(\"Error deleting employee:\", error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Error\",\n          text: \"An error occurred while deleting the employee. Please try again later.\",\n        });\n      }\n    } else {\n      console.log(\"Delete action was cancelled\");\n    }\n  });\n};\n\n\n  return (\n    <div className=\"container\">\n      {!isAdding && !isEditing && (\n        <>\n          <Header setIsAdding={setIsAdding} />\n          <List employees={employees} handleEdit={handleEdit} handleDelete={handleDelete} />\n        </>\n      )}\n\n      {isAdding && <Add setEmployees={setEmployees} setIsAdding={setIsAdding} />}\n\n      {isEditing && (\n        <Edit\n          selectedEmployee={selectedEmployee}\n          setEmployees={setEmployees}\n          setISEditing={setISEditing}\n          selectedEmployeeId={selectedEmployeeId} \n          employees={employees} \n        />\n      )}\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}